<!DOCTYPE html>
<html>
<head>
    <title>Définir Nouveau Mot de Passe</title>
</head>
<ul>
    <li><a href="Accueil.html" target="_self" title="Accueil">Accueil</a></li>
    <li><a href="Mesrisquesproche.html" target="_self" title="Mesrisquesproches">Mes risques proche</a></li>
    <li><a href="monprofil.html" target="_self" title="monprofil">Mon profil</a></li>
  </ul>
  
<body>
    <form id="newPasswordForm">
        <label for="newPassword">Nouveau Mot de Passe:</label>
        <input type="password" id="newPassword" name="password" required><br><br>
        
        <label for="newPassword2">Confirmez le Nouveau Mot de Passe:</label>
        <input type="password" id="newPassword2" name="password2" required><br><br>
        
        <button type="submit">Définir le Nouveau Mot de Passe</button>
    </form>
    
    <p id="newPasswordMessage" style="color: red;"></p>

    <script>
        document.getElementById('newPasswordForm').addEventListener('submit', function (event) {
            event.preventDefault();

            var newPassword = document.getElementById('newPassword').value;
            var newPassword2 = document.getElementById('newPassword2').value;
            var newPasswordMessage = document.getElementById('newPasswordMessage');

            if (newPassword === newPassword2 && validatePassword(newPassword)) {
               
                localStorage.setItem('password', newPassword);
                window.location.href = "connexion.html"; 
            } else {
                newPasswordMessage.textContent = 'Les mots de passe ne correspondent pas ou sont invalides.';
            }
        });

        function validatePassword(password) {
            var re = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
            return re.test(password);
        }
    </script>
</body>
<footer>
    <li><a href="mentionlegal.html" target="_self" title="mentionlegal">Mentions légales</a></li>
    <li><a href="conditionutil.html" target="_self" title="conditionutil">Condition d'utilisation</a></li>
    <li><a href="politiqueconfid.html" target="_self" title="politiqueconfid">Politique de confidentialité</a></li>
    <li><a href="noscontact.html" target="_self" title="noscontact">Contacts</a></li>
    <li><a href="contactétat.html" target="_self" title="contactétat">Numeros vert de l'état</a></li>
    <li><a href="remerciment.html" target="_self" title="remerciment">Remerciment</a></li>
</footer>
</html>
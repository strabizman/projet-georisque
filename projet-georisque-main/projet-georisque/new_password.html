<!DOCTYPE html>
<html>
<head>
    <title>Définir Nouveau Mot de Passe</title>
</head>
<body>
    <form id="newPasswordForm">
        <label for="newPassword">Nouveau Mot de Passe:</label>
        <input type="password" id="newPassword" name="password" required><br><br>
        
        <label for="newPassword2">Confirmez le Nouveau Mot de Passe:</label>
        <input type="password" id="newPassword2" name="password2" required><br><br>
        
        <button type="submit">Définir le Nouveau Mot de Passe</button>
    </form>
    
    <p id="newPasswordMessage" style="color: red;"></p>

    <script>
        document.getElementById('newPasswordForm').addEventListener('submit', function (event) {
            event.preventDefault();

            var newPassword = document.getElementById('newPassword').value;
            var newPassword2 = document.getElementById('newPassword2').value;
            var newPasswordMessage = document.getElementById('newPasswordMessage');

            if (newPassword === newPassword2 && validatePassword(newPassword)) {
                // Stocker le nouveau mot de passe dans le localStorage
                localStorage.setItem('password', newPassword);
                window.location.href = "connexion.html"; // Rediriger vers la page de connexion
            } else {
                newPasswordMessage.textContent = 'Les mots de passe ne correspondent pas ou sont invalides.';
            }
        });

        function validatePassword(password) {
            var re = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
            return re.test(password);
        }
    </script>
</body>
</html>
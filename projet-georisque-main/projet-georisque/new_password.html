<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Réinitialisation de Mot de Passe - TerraRisk</title>
        <link rel="stylesheet" href="CSS/navbar.css">
        <link rel="stylesheet" href="CSS/style.css">
        <link rel="stylesheet" href="CSS/new_password.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Leckerli+One&display=swap" rel="stylesheet">
    </head>
    <header>
        <nav class="navbar navbar-expand-lg navbar">
          <div class="container-fluid position-relative">
            <a class="navbar-brand navbar-brand-center">TerraRisk</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
              <ul class="navbar-nav me-auto">
                <li class="nav-item">
                  <a class="nav-link  " aria-current="page" href="Accueil.html">Accueil</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="Mesrisquesproche.html">Mes risques proches</a>
                </li>
              </ul>
              <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                  <a class="nav-link" href="monprofil.html">Connexion</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>

    
<body>
    <main>
        <div class="container mt-5">
            <h1 class="text-left mb-4">Définir Nouveau Mot de Passe</h1>
            <form id="newPasswordForm" class="mt-4">
                <div class="form-group">
        <label for="newPassword">Nouveau Mot de Passe:</label>
        <input type="password" id="newPassword" name="password" required><br><br>
        <label for="newPassword2">Confirmez le Nouveau Mot de Passe:</label>
        <input type="password" id="newPassword2" name="password2" required><br><br>
    </div>
        <button type="submit" class="btn btn-primary btn-block mt-3">Définir le Nouveau Mot de Passe</button>
    <p id="newPasswordMessage" style="color: red;"></p>
</form>
</div>
</main>
</body>

<footer><ul>
    <li><a href="mentionlegal.html" target="_self" title="mentionlegal">Mentions légales</a></li>
    <li><a href="conditionutil.html" target="_self" title="conditionutil">Condition d'utilisation</a></li>
    <li><a href="politiqueconfid.html" target="_self" title="politiqueconfid">Politique de confidentialité</a></li>
    <li><a href="noscontact.html" target="_self" title="noscontact">Contacts</a></li>
    <li><a href="remerciment.html" target="_self" title="remerciment">Remerciment</a></li>
</ul>
</footer>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
<script>
    document.getElementById('newPasswordForm').addEventListener('submit', function (event) {
        event.preventDefault();

        var newPassword = document.getElementById('newPassword').value;
        var newPassword2 = document.getElementById('newPassword2').value;
        var newPasswordMessage = document.getElementById('newPasswordMessage');

        if (newPassword === newPassword2 && validatePassword(newPassword)) {
           
            localStorage.setItem('password', newPassword);
            window.location.href = "monprofil.html"; 
        } else {
            newPasswordMessage.textContent = 'Les mots de passe ne correspondent pas ou sont invalides.';
        }
    });

    function validatePassword(password) {
        var re = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
        return re.test(password);
    }
</script>
</html>
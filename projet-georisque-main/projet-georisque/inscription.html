<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TerraRisk</title>
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/formulaire.css">
    <script>
        document.getElementById('myForm').addEventListener('submit', function (event) {
            event.preventDefault();
        
            var nom = document.getElementById('nom').value;
            var prenom = document.getElementById('prenom').value;
            var email = document.getElementById('email').value;
            var pays = document.getElementById('pays').value;
            var departement = document.getElementById('departement').value;
            var numeros = document.getElementById('numeros').value;
            var password = document.getElementById('password').value;
            var password2 = document.getElementById('password2').value;
            var errorMessage = document.getElementById('errorMessage');
        
            if (validateEmail(email) && validatePassword(password) && passwordsMatch(password, password2)) {
                localStorage.setItem('nom', nom);
                localStorage.setItem('prenom', prenom);
                localStorage.setItem('email', email);
                localStorage.setItem('pays', pays);
                localStorage.setItem('departement', departement);
                localStorage.setItem('numeros', numeros);
                localStorage.setItem('password', password);
                window.location.href = "profil.html";
            } else {
                errorMessage.textContent = 'Veuillez entrer un email et un mot de passe valides, et vous assurer que les mots de passe correspondent.';
            }
        });
        
        document.getElementById('resetButton').addEventListener('click', function () {
            document.getElementById('myForm').reset();
            document.getElementById('errorMessage').textContent = '';
        });
        
        function validateEmail(email) {
            var re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        function validatePassword(password) {
            var re = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
            return re.test(password);
        }
        
        function passwordsMatch(password, password2) {
            if (password !== password2) {
                document.getElementById('errorMessage').textContent = 'Les mots de passe ne correspondent pas.';
                return false;
            }
            return true;
        }
        </script>
</head>
<body>
    <ul>
        <li><a href="Accueil.html" target="_self" title="Accueil">Accueil</a></li>
        <li><a href="Mesrisquesproche.html" target="_self" title="Mesrisquesproches">Mes risques proche</a></li>
        <li><a href="monprofil.html" target="_self" title="monprofil">Mon profil</a></li>
    </ul>

    <h2>Veuillez vous inscrire</h2>
    <form id="myForm">
        <label for="nom">Nom</label>
        <input type="text" class="form-control" id="nom" aria-describedby="nomhelp" placeholder="Noter votre Nom" required>
        <small id="nomhelp" class="form-text text-muted"></small> <br>

        <label for="prenom">Prenom</label>
        <input type="text" class="form-control" id="prenom" aria-describedby="prenomhelp" placeholder="Noter votre Prenom" required>
        <small id="prenomhelp" class="form-text text-muted"></small> <br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" placeholder="Noter votre adresse mail" required>
        <small id="email" class="form-text text-muted"></small> <br>

        <label for="pays">Pays d'origine</label>
        <input type="text" class="form-control" id="pays" aria-describedby="payshelp" placeholder="Noter votre Pays D'origine">
        <small id="payshelp" class="form-text text-muted"></small> <br>

        <label for="departement">Département</label>
        <input type="number" class="form-control" id="departement" aria-describedby="departementhelp" placeholder="Noter votre Département">
        <small id="departementhelp" class="form-text text-muted"></small> <br>

        <label for="numeros">Numéros de téléphone</label>
        <input type="tel" class="form-control" id="numeros" aria-describedby="numeroshelp" placeholder="Noter votre Numéros de téléphone">
        <small id="numeroshelp" class="form-text text-muted"></small> <br>

        <label for="password">Mot de passe</label>
        <input type="password" class="form-control" id="password" aria-describedby="passwordhelp" placeholder="Noter votre Mot de passe" required>
        <small id="passwordhelp" class="form-text text-muted">
            <br>Votre Mot de passe doit contenir une Majuscule, un minuscule et un caractère spécial
        </small> <br>

        <label for="password2">Confirmer Mot de passe</label>
        <input type="password" class="form-control" id="password2" aria-describedby="passwordhelp" placeholder="Valider votre Mot de passe" required>
        <small id="passwordhelp" class="form-text text-muted"></small> <br>

        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="Check1" required>
            <label class="form-check-label" for="Check1">Accepter les conditions d'utilisation</label>
        </div>
        <button type="submit">Soumettre</button>
        <button type="button" id="resetButton">Réinitialiser</button>
    </form>
    <p id="errorMessage" style="color: red;"></p>
</body>

<footer>
    <ul>
        <li><a href="mentionlegal.html" target="_self" title="mentionlegal">Mentions légales</a></li>
        <li><a href="conditionutil.html" target="_self" title="conditionutil">Condition d'utilisation</a></li>
        <li><a href="politiqueconfid.html" target="_self" title="politiqueconfid">Politique de confidentialité</a></li>
        <li><a href="noscontact.html" target="_self" title="noscontact">Contacts</a></li>
        <li><a href="remerciment.html" target="_self" title="remerciment">Remerciement</a></li>
    </ul>
</footer>

</html>
